<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to texor • texor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to texor">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">texor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/environment-handling.html">Environment Handling</a></li>
    <li><a class="dropdown-item" href="../articles/How-texor-convert-Sweave-to-R-Markdown.html">How texor convert Sweave to R Markdown</a></li>
    <li><a class="dropdown-item" href="../articles/introduction-to-texor.html">Introduction to texor</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Abhi-1U/texor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to texor</h1>
                        <h4 data-toc-skip class="author">Abhishek
Ulayil</h4>
            
            <h4 data-toc-skip class="date">2024-08-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Abhi-1U/texor/blob/main/vignettes/introduction-to-texor.Rmd" class="external-link"><code>vignettes/introduction-to-texor.Rmd</code></a></small>
      <div class="d-none name"><code>introduction-to-texor.Rmd</code></div>
    </div>

    
    
<p>The CRAN package <code>texor</code> helps in converting old LaTeX
based documents, research papers to HTML through intermediate
conversions. This was particularly a problem for legacy R Research
papers where HTML export was not available and hence modern
compatibility to export a HTML file was missed out.</p>
<div class="section level2">
<h2 id="why-migrate-to-web-format">Why migrate to web format ?<a class="anchor" aria-label="anchor" href="#why-migrate-to-web-format"></a>
</h2>
<p>We have advanced a lot in the field of web development and modern
websites offer a much more interactive and accessible interface for the
knowledge we consume. The advantages of a web format are :</p>
<ol style="list-style-type: decimal">
<li>Better support for screen readers, hence better accessibility.</li>
<li>Convenient to use on mobile devices with smaller screens.</li>
<li>Maintaining parity with newer articles available in the web
format.</li>
<li>Easier translations for the text.</li>
</ol>
<p>For maintaining parity with modern articles, we convert the legacy
articles into R markdown format, a markdown based solution developed to
allow for publishing PDFs and web content simultaneously without
requiring separate documents, along with executable code chunks to
reproduce the results during compile.</p>
</div>
<div class="section level2">
<h2 id="how-do-we-bring-back-the-legacy-documents-into-a-modern-format">How do we bring back the legacy documents into a modern format
?<a class="anchor" aria-label="anchor" href="#how-do-we-bring-back-the-legacy-documents-into-a-modern-format"></a>
</h2>
<p>Now, we have a lot of legacy articles which are only available in the
PDF format and to bring these LaTeX based documents into a web format we
needed a conversion tool which could read LaTeX and generate a markdown
file. The solution exists in a beautiful software written in haskell
called “Pandoc”, it is fast, portable and integrated well in the R
ecosystem. But there are limitations in the way Pandoc works with LaTeX
articles, some of these are :</p>
<ol style="list-style-type: decimal">
<li>Pandoc understands a subset of the LaTeX language, which means we
have to simplify any document we pass on to it for an efficient
conversion.</li>
<li>It does not recognize custom environments like <code>example</code>
enviornment which is based on top of <code>verbatim</code> environment,
so we need to devise methods to replace these custom environments with
simple alternatives.</li>
<li>Talking about bibliography, pandoc will not convert the embedded
bibliographic entries into BibTeX, which is a preferred format in R
markdown.</li>
<li>As for meta-data, pandoc can extract a few bits of meta-data from
the LaTeX article, however we need a lot more details in order to create
a front matter yaml for a R markdown.</li>
<li>Sweave code chunks are not natively understood by pandoc, this
requires a custom reader to seperate the code chunks and transform it
into R markdown code chunks.</li>
<li>Pandoc will never generate R code chunks for figures and tables, we
would need to develop filters to get these functionality.</li>
<li>Numbering and referencing of various article components like figure,
equations and tables require modifications during the conversion using
filters to acheive a web article which is consistent with the ones we
currently publish.</li>
<li>Some artifacts like included PDF images, tikz graphics and algorithm
environments needs pre-processing and integration with the conversion
process.</li>
</ol>
<p>Sounds like a lot of hassle to just convert a single LaTeX article to
a R markdown file right ? How nice it would be if we automated
workarounds for most of these limitations programmatically and do not
need to manually perform them for each and every document. This was the
exact thought, when we developed the <code>texor</code> package and its
sister package <code>rebib</code>. It did all of the above and reduced
the conversion process for the end user to just a single function
call.</p>
<p>If you are converting a R journal LaTeX article</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/latex_to_web.html">latex_to_web</a></span><span class="op">(</span><span class="va">path_to_folder</span><span class="op">)</span></span></code></pre></div>
<p>or in case you are converting a Sweave article<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Available in texor version &amp;gt;= v1.4.0&lt;/p&gt;"><sup>1</sup></a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/rnw_to_rmd.html">rnw_to_rmd</a></span><span class="op">(</span><span class="va">path_to_file</span><span class="op">)</span></span></code></pre></div>
<p>There are more customization options available, if you desire things
to be handled differently but for the most part, the default settings
will yield a relatively good conversion to R markdown, which can be
knitted to HTML.</p>
<p>This is the aim of the whole package, reducing complexity and
automating repetitive tasks for a better conversion process.</p>
<p>Although a key point to note here is, not all documents might convert
well or at all. This is due to the nature of LaTeX being a very
customizable and less restrictive.</p>
</div>
<div class="section level2">
<h2 id="internal-conversion-workflow">Internal Conversion Workflow:<a class="anchor" aria-label="anchor" href="#internal-conversion-workflow"></a>
</h2>
<p>To explain the internal conversion process a bit more in depth, I
have divided them into stages, the workflow here is indicative only and
may differ from the actual sequence due to updates.</p>
<div class="section level3">
<h3 id="stage-0-preparing-to-convert">Stage 0 : preparing to convert<a class="anchor" aria-label="anchor" href="#stage-0-preparing-to-convert"></a>
</h3>
<p>In this stage, we will check the basics like using correct path,
normalizing the path,extracting the file_name/ wrapper_name etc..</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># normalizing path using xfun package</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu">xfun</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/xfun/man/normalize_path.html" class="external-link">normalize_path</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># getting wrapper file name</span></span>
<span><span class="va">wrapper_file</span> <span class="op">&lt;-</span> <span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/get_wrapper_type.html">get_wrapper_type</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># getting the main LaTeX file name</span></span>
<span><span class="va">file_name</span> <span class="op">&lt;-</span> <span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/get_texfile_name.html">get_texfile_name</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-1-copyingremoving-style-files">Stage 1 : Copying/Removing Style files<a class="anchor" aria-label="anchor" href="#stage-1-copyingremoving-style-files"></a>
</h3>
<p>Pandoc does not need, all of the style files as it is not trying to
compile, but rather convert. Hence, to workaround certain limitations,
we have to remove the RJournal.sty file and include a new style file
which redefines certain commands.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This function will remove RJournal.sty file,</span></span>
<span><span class="co"># Copy the Metafix.sty file and link it in wrapper.</span></span>
<span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/include_style_file.html">include_style_file</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-2-handling-bibliographies">Stage 2 : Handling Bibliographies<a class="anchor" aria-label="anchor" href="#stage-2-handling-bibliographies"></a>
</h3>
<p>As we do not desire the embedded bibliography to be included as a div
element in the article itself, we need to convert it to Bibtex
format.</p>
<p>For removing the bibliography div elements from the article we use a
Lua filter later on.</p>
<p>For converting the embedded bibliography we use rebib package. By
default I have set up the bibliography aggregation function, which will
logically create/update the bibtex file and include it in the
article_tex_file as well (if not linked).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># bibliography aggregation when both bibtex and embedded bibliography available,</span></span>
<span><span class="co"># Using Bibtex file for bibliography if no embedded bibliography available,</span></span>
<span><span class="co"># Create a new bibtex file using the embedded bibliography in the document.</span></span>
<span><span class="fu">rebib</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rebib/man/aggregate_bibliography.html" class="external-link">aggregate_bibliography</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-3-handing-figures">Stage 3 : Handing Figures<a class="anchor" aria-label="anchor" href="#stage-3-handing-figures"></a>
</h3>
<p>Texor package creates a yaml report about the figure environments,
including tikz, algorithm2e images. There is also a logical function
which uses pandoc’s Image data for converting PDF images to PNG.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_figures.html">handle_figures</a></span><span class="op">(</span><span class="va">dir</span>, <span class="va">file_name</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-4-patching-environments">Stage 4 : Patching Environments<a class="anchor" aria-label="anchor" href="#stage-4-patching-environments"></a>
</h3>
<p>Pandoc does not support certain environments, like:<br>
in figures : figure*, algorithmic, algorithm.<br>
in table : table*.<br>
in code : example, example*, Sin, Sout, Scode, Sinput, Soutput,
smallverbatim, boxedverbatim.</p>
<p>Here, texor will use the stream editor to patch these environments to
the default types <code>figure</code>,<code>table</code> and
<code>verbatim</code>.</p>
<p>There is also a function to patch equations (especially eqnarray
environment).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/patch_code_env.html">patch_code_env</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/patch_table_env.html">patch_table_env</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/patch_figure_env.html">patch_figure_env</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/patch_equations.html">patch_equations</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-5-converting-the-latex-document-to-markdown">Stage 5 : Converting the LaTeX document to Markdown<a class="anchor" aria-label="anchor" href="#stage-5-converting-the-latex-document-to-markdown"></a>
</h3>
<p>Here we will convert the document to Markdown, with a lot of Lua
filters modifying the document.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/convert_to_markdown.html">convert_to_markdown</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-6-copying-over-dependency-files">Stage 6 : Copying over dependency files<a class="anchor" aria-label="anchor" href="#stage-6-copying-over-dependency-files"></a>
</h3>
<p>This function will copy the files such as figures of all kinds,
bibtex file, pdfs etc. to the /web folder.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/copy_other_files.html">copy_other_files</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-7-converting-the-markdown-to-rmarkdown">Stage 7 : Converting the Markdown to Rmarkdown<a class="anchor" aria-label="anchor" href="#stage-7-converting-the-markdown-to-rmarkdown"></a>
</h3>
<p>In this stage we convert the markdown to Rmarkdown by reading and
adding metadata information like ctv,CRANpkgs,BIOpkgs,slug,author
metadata, title, abstract,etc..</p>
<p>We also add important parameters for
<code><a href="https://rdrr.io/pkg/rjtools/man/rjournal_article.html" class="external-link">rjtools::rjournal_web_article</a></code> like:</p>
<ol style="list-style-type: decimal">
<li>self_contained = TRUE</li>
<li>toc = FALSE</li>
<li>legacy_pdf = TRUE</li>
<li>mathjax = “<a href="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" class="external-link uri">https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js</a>”</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/generate_rmd.html">generate_rmd</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stage-8-creating-rj-web-article-from-the-rmarkdown-file">Stage 8 : Creating RJ-web-article from the Rmarkdown file<a class="anchor" aria-label="anchor" href="#stage-8-creating-rj-web-article-from-the-rmarkdown-file"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/produce_html.html">produce_html</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="note-on-dependencies">Note on Dependencies<a class="anchor" aria-label="anchor" href="#note-on-dependencies"></a>
</h2>
<p>This package is involved in tackling multiple challenges, thus has to
rely on multiple software tools. A list of dependencies is included
here:</p>
<ol style="list-style-type: decimal">
<li>Pandoc (min: V3.1) <a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;included in Rstudio&lt;/p&gt;"><sup>2</sup></a> : To convert the basic LaTeX to
rmarkdown.</li>
<li>poppler pdfutils : To convert embedded PDF to PNG.</li>
<li>LaTeX/TinyTex<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;read more &lt;a href="https://yihui.org/tinytex/" class="external-link"&gt;here&lt;/a&gt;&lt;/p&gt;'><sup>3</sup></a> : For Tikz graphic conversion.</li>
<li>rebib : For bibliography conversions/aggregations.</li>
<li>rjtools : For the rjournal_web_article template.</li>
<li>stringr : for string manipulation functions.</li>
<li>Lua filters <a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Filters are included in texor package&lt;/p&gt;"><sup>4</sup></a>
</li>
</ol>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Put Together By Abhishek Ulayil.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
