<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How texor convert Sweave to R Markdown • texor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How texor convert Sweave to R Markdown">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">texor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/environment-handling.html">Environment Handling</a></li>
    <li><a class="dropdown-item" href="../articles/How-texor-convert-Sweave-to-R-Markdown.html">How texor convert Sweave to R Markdown</a></li>
    <li><a class="dropdown-item" href="../articles/introduction-to-texor.html">Introduction to texor</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Abhi-1U/texor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How texor convert Sweave to R Markdown</h1>
                        <h4 data-toc-skip class="author"></h4>
<p>Yinxiang
Huang</p>
            
            <h4 data-toc-skip class="date">2024-07-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Abhi-1U/texor/blob/main/vignettes/How-texor-convert-Sweave-to-R-Markdown.Rmd" class="external-link"><code>vignettes/How-texor-convert-Sweave-to-R-Markdown.Rmd</code></a></small>
      <div class="d-none name"><code>How-texor-convert-Sweave-to-R-Markdown.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      <p>Many of the early R packages used Sweave to write vigneettes,
      which will be shown to users as pdf format on CRAN. However, as
      time goes on, R Markdown, a lightweight markup language, has begun
      to gradually replace Sweave and better present content on CRAN in
      the form of HTML.</p>
      <p>In order to help many R package developers who haven’t used R
      Markdown or don’t have time to do the format conversion manually
      to migrate from Sweave to R Markdown, <strong>texor</strong> helps
      people automate this conversion process.</p>
    </div>
    
<div class="article">
<div class="section level2">
<h2 id="sec:intro">Introduction<a class="anchor" aria-label="anchor" href="#sec:intro"></a>
</h2>
<p>As we know, Sweave is a tool that allows to embed R code into LaTeX,
while R Markdown is a lightweight markup language that allows to embed R
code into Markdown. The main difference between them is that R Markdown
is easier to use and more flexible than Sweave. For example, R Markdown
can be converted to many formats, such as HTML, PDF, and Word, while
Sweave can only be converted to PDF.</p>
<p>In order to help R users, especially many R package developers who
haven’t used R Markdown or don’t have time to do the format conversion
manually to migrate from Sweave to R Markdown, <code>texor</code> helps
people automate this conversion process.</p>
<p>The most challenging part of the conversion is non-existent syntax
may require consideration of elegant alternatives. For example,
<code>\SweaveOpts{concordance=TRUE}</code> in Sweave is not supported in
R Markdown. In this case, we need to find a way to replace it with a
suitable alternative in R Markdown. First, we convert this command to a
code chunk in R Markdown, and then we add the
<code>knitr::opts_chunk$set(concordance=TRUE)</code> command to the code
chunk to achieve the same effect.</p>
</div>
<div class="section level2">
<h2 id="sec:work">How does <code>texor::rnw_to_rmd</code> work?<a class="anchor" aria-label="anchor" href="#sec:work"></a>
</h2>
<p>The <code><a href="../reference/rnw_to_rmd.html">texor::rnw_to_rmd</a></code> function is used to convert a
Sweave file to an R Markdown file. The function takes a file path as
input and returns a logic value indicating whether the conversion is
successful.</p>
<p>The conversion process is as follows:</p>
<ol style="list-style-type: decimal">
<li><p>Read the Sweave file and convert it to knitr format. knitr is
almost the same as Sweave, but it is more powerful and flexible. The
conversion is done by function <code><a href="https://rdrr.io/pkg/knitr/man/Sweave2knitr.html" class="external-link">knitr::Sweave2knitr</a></code><span class="citation">[1]</span>.</p></li>
<li><p>Read the knitr file and separate the R code and LaTeX content.
The R code is stored in code chunks, and the LaTeX content is converted
to markdown text. The code chunks’ position information is handled by a
placeholder in LaTeX content.</p></li>
<li><p>Write the R Markdown file. Combine the R code and markdown text
and write them to the R Markdown file.</p></li>
<li><p>Add yaml front matter to the R Markdown file. The yaml front
matter contains metadata such as the title, author, and date of the R
Markdown file.</p></li>
<li><p>Add a reference section to the R Markdown file. The reference
section contains the references used in the R Markdown file. All
references are stored in a separate file (.bib) using R package
<code>rebib</code>.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="sec:example">Example<a class="anchor" aria-label="anchor" href="#sec:example"></a>
</h2>
<p>Here is an example of how to use <code><a href="../reference/rnw_to_rmd.html">texor::rnw_to_rmd</a></code> to
convert a Sweave file to an R Markdown file.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Abhi-1U/texor" class="external-link">texor</a></span><span class="op">)</span></span>
<span>    <span class="va">article_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/sweave_article"</span>, package <span class="op">=</span> <span class="st">"texor"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">your_article_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"tempdir"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">article_dir</span>, to <span class="op">=</span> <span class="va">your_article_folder</span>,recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="va">your_article_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">your_article_folder</span>, <span class="st">"sweave_article"</span>, <span class="st">"example.Rnw"</span>,sep<span class="op">=</span><span class="st">"/"</span><span class="op">)</span></span>
<span>    <span class="va">your_article_path</span> <span class="op">&lt;-</span> <span class="fu">xfun</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/xfun/man/normalize_path.html" class="external-link">normalize_path</a></span><span class="op">(</span><span class="va">your_article_path</span><span class="op">)</span></span>
<span>    <span class="fu">texor</span><span class="fu">::</span><span class="fu"><a href="../reference/rnw_to_rmd.html">rnw_to_rmd</a></span><span class="op">(</span><span class="va">your_article_path</span>, </span>
<span>                      front_matter_type <span class="op">=</span> <span class="st">"vignettes"</span>, </span>
<span>                      clean_up <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                      autonumber_eq <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">your_article_folder</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Notice that you can manually check the R Markdown file in the tempdir
before executing unlink function. And try to knit it into HTML format to
see if it works. Furthermore, you can compile the original Sweave file
into PDF format to compare the results.</p>
</div>
<div class="section level2">
<h2 id="sec:discuss">Discussion<a class="anchor" aria-label="anchor" href="#sec:discuss"></a>
</h2>
<p>Although <code><a href="../reference/rnw_to_rmd.html">texor::rnw_to_rmd</a></code> can convert most Sweave files
to R Markdown files, there are still some limitations.</p>
<p>First, The conversion of complex LaTeX commands may not be perfect
especially when using rare macros. In this case, we need to manually
modify the R Markdown file to achieve the desired effect.</p>
<p>It should be noted that the syntax of R Markdown is far simpler than
LaTeX’s, so it is normal for complex renderings in LaTeX not to show up
in R Markdown. <code>texor</code> will first try to convert it to a
simpler syntax to be as similar as possible to the original article.</p>
<p>Another problem is that the R code chunk may influence the rendering
of the LaTeX content, or give some LaTeX style output. In this case,
it’s impossible to reproduce the same effect in R Markdown.</p>
<p>Some R code chunks may output image, so how to numbering the image is
a problem. To solve this problem, <code>texor</code> compile the Sweave
file to LaTeX and extract the image number, then add the image number to
the R Markdown file. However, this method may cause long waiting time on
compiling, so we decided to make it optional.</p>
<p>In conclusion, <code>texor</code> is a useful tool for converting
Sweave files to R Markdown files, but it may not be perfect. Users
should understand the issues that could arise in converting a complex
system to a simpler one and choose appropriate documents for the
conversion.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="sec:ref">References<a class="anchor" aria-label="anchor" href="#sec:ref"></a>
</h2>
<div id="refs" class="references csl-bib-body" entry-spacing="0">
<div id="ref-sweave2knitr" class="csl-entry">
<div class="csl-left-margin">[1] </div>
<div class="csl-right-inline">Yihui Xie, <span>“Transition from sweave to
knitr - yihui xie | 谢益辉.”</span> Feb. 2012. Available: <a href="https://yihui.org/knitr/demo/sweave/" class="external-link">https://yihui.org/knitr/demo/sweave/</a>
</div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Put Together By Abhishek Ulayil.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
